{"pages":[{"title":"关于","text":"这里什么也没有 (`・ω・´) 话说，你知道我为什么叫 Scallop 吗？","link":"/about/"},{"title":"友链","text":"暂时还没有呢 (๑•́ ₃ •̀๑)","link":"/links/"}],"posts":[{"title":"两岸差异用词爬虫","text":"写在开头 - Java 大法好 昨天我在把一个电影字幕从繁体转成简体时，发现转完后有一些台湾地区的用词（繁体字幕大部分都是台湾的），所以突发灵感想写个翻译程序。 首先得有个词库，Chinese Linguipedia 这个网站，里边有个两岸差异用词，看上去挺全的，就选它了。 词语有三级分类，每页最多十行，链接如此：http://chinese-linguipedia.org/clk/diff?class=二级分类编号&amp;classNa=三级分类名称&amp;page=页面 编号范围是 1~34，其中 1~5 是五个一级分类的编号。因为爬下来的数据要细分，所以就忽略大分类，直接从分类 6~34 每一页遍历过去获取。同时，只有 6, 7, 8 三个二级分类下有三级分类，这些分类我手打进了一个 json 里。 然后是网页处理部分 每一页都有几段这样的 html： 123&lt;td align='center';&gt;同實異名&lt;/td&gt;&lt;td class=&quot;head3&quot; style=&quot;font-family:'微軟正黑體';font-size:1.1em;&quot;&gt;&lt;a href=&quot;&quot;&gt;&lt;a href=&quot;http://chinese-linguipedia.org/clk/search/刀具/0/0?srchType=1&quot;&gt;刀具&lt;/a&gt;&lt;/a&gt;&lt;/td&gt;&lt;td class=&quot;head3&quot; style=&quot;font-family:'微軟正黑體';font-size:1.1em;&quot;&gt;&lt;a href=&quot;&quot;&gt;&lt;a href=&quot;http://chinese-linguipedia.org/clk/search/刀具/0/0?srchType=1&quot;&gt;刀具&lt;/a&gt;/&lt;a href=&quot;http://chinese-linguipedia.org/clk/search/刃具/0/0?srchType=1&quot;&gt;刃具&lt;/a&gt;&lt;/a&gt;&lt;/td&gt; 首先通过正则表达式 &lt;td align='center';&gt;(.*?)&lt;/td&gt;\\r\\n(.*?)\\r\\n(.*)取出 $1 “同異類別”、$2 “臺灣語詞” 的元素、$3 “大陸語詞” 的元素然后用另一个正则表达式 1\\&quot;&gt;([\\s\\S]*?)&lt;/a 匹配 $2 和 $3，得到每个“臺灣語詞”和“大陸語詞”，之后以/为分隔符合并向 output.csv 文件写入一行：一级分类,二级分类,三级分类,同異類別,臺灣語詞,大陸語詞 有人可能注意到上面用了一个 [\\s\\S]，这里是因为网站的数据有点问题，有一条记录的词里边有个换行，导致获取不到这条记录。 合并字符串集合或数组，用到了一个 Java 8 String 类的新方法 String.join，第一个参数是分隔符字符串，第二个参数是一个集合或者数组 至于翻译程序，晚点再来弄，目前计划是检测到一个台湾用词，就显示出相对应的所有大陆用词，可以自定义更改的词语。 需要考虑到一个词语重叠问题，和类似于“簡訊地址”这样的词语的翻译问题，应该需要翻译为“联系方式”。 还有一些这个词库里没有涉及到的词语，例如“聯絡”和“联系”，网站上面显示的是大陆“今不用”此词语，可以通过增加的方法来完善。 同时这个网站支持通配符查询功能，应该可以将整部字典都爬下来，只是一个时间问题。 若有哪位大神比较熟悉于这方面的问题，我们可以互相讨论一下，来共同完成这个项目。 本项目的 GitHub：https://github.com/yescallop/ChineseLinguipediaCrawler PS: 微软系列产品不能正确识别无 BOM 头的 UTF-8 编码文件，需要在写入数据之前在文件头写入 BOM 头 0xEFBBBF PPS: 这个网站早已大改，我对 Java 的记忆也已变淡，谨以此篇留作纪念。","link":"/posts/2017/clcrawler/"},{"title":"在树莓派上搭建邮件服务器 Postfix + Dovecot + SASL","text":"最近入手了一台树莓派 3B，要把 ECS 上的各种服务器全部迁移到上面，配置邮件服务器的方法有些麻烦，所以在此写一篇教程分享给大家供借鉴。 更新 2017-04-29: 无法发送邮件，很久没有解决更新 2017-08-23: 发件问题已修复 准备环境Raspberry Pi 3 Model B，运行 Raspbian 最新版本 开始搭建首先通过 apt-get 获取 Postfix，Dovecot 和 SASL 我个人认为 IMAP 比 POP3 好，所以在此没有配置 POP3，如有需要请加上 dovecot-pop3d sudo apt-get install postfix dovecot-imapd sasl2-bin 配置 Postfix 和 SASL下面部分内容借鉴了 Debian 官方 Wiki 的文章 PostfixAndSASL 创建一个文件 /etc/postfix/sasl/smtpd.conf，内容如下 pwcheck_method: saslauthd mech_list: PLAIN LOGIN 复制 /etc/default/saslauthd 到 /etc/default/saslauthd-postfix，修改内容如下 START=yes DESC=&quot;SASL Auth. Daemon for Postfix&quot; NAME=&quot;saslauthd-postf&quot; # 最长为 15 字符 OPTIONS=&quot;-c -m /var/spool/postfix/var/run/saslauthd&quot; 创建 Postfix 改变根目录所需的子目录，命令： sudo dpkg-statoverride --add root sasl 710 /var/spool/postfix/var/run/saslauthd 将 postfix 用户加入组 sasl sudo adduser postfix sasl 重启 saslauthd 服务 sudo service saslauthd restart 编辑 Postfix 配置文件 /etc/postfix/main.cf，以我的域名 yescallop.cn 为例，修改内容如下 myhostname = yescallop.cn myorigin = $myhostname mydestination = $myhostname, localhost smtpd_sasl_local_domain = $myhostname smtpd_sasl_auth_enable = yes broken_sasl_auth_clients = yes smtpd_sasl_security_options = noanonymous smtpd_recipient_restrictions = permit_sasl_authenticated, reject_unauth_destination 重启 Postfix （重载配置是不够的） sudo service postfix restart 然后就可以使用 telnet 连接 25 端口测试了 配置 Dovecot 编辑 Dovecot 配置文件 /etc/dovecot/dovecot.conf，修改内容如下： listen = * 编辑认证配置文件 /etc/dovecot/conf.d/10-auth.conf，修改内容如下： disable_plaintext_auth = no auth_mechanisms = plain login 编辑 IMAP 配置文件 /etc/dovecot/conf.d/20-imap.conf，修改内容如下： mail_max_userip_connections = 100 # 此处可自定义，不要太小，容易导致连接被拒绝 重启 Dovecot sudo service dovecot restart 可以使用 telnet 连接 143 端口测试 最后可以添加 Postfix，Dovecot 和 SASL 到启动组 sudo update-rc.d postfix defaults sudo update-rc.d dovecot defaults sudo update-rc.d saslauthd defaults All Done!","link":"/posts/2016/mailserver/"}],"tags":[{"name":"Java","slug":"Java","link":"/tags/Java/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"}],"categories":[{"name":"数据","slug":"数据","link":"/categories/%E6%95%B0%E6%8D%AE/"},{"name":"笔记","slug":"笔记","link":"/categories/%E7%AC%94%E8%AE%B0/"}]}